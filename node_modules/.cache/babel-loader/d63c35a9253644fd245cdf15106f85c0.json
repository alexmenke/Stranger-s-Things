{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexmenke/Fullstack/course_work/project_10/strangersThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/alexmenke/Fullstack/course_work/project_10/strangersThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/alexmenke/Fullstack/course_work/project_10/strangersThings/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useNavigate,useParams}from'react-router-dom';import{deletePost,updatePost}from'../api';import{Grid,Paper,TextField,Button}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditPost=function EditPost(_ref){var posts=_ref.posts,token=_ref.token,fetchPosts=_ref.fetchPosts;var _useParams=useParams(),postID=_useParams.postID;var _posts$filter=posts.filter(function(post){return post._id===postID;}),_posts$filter2=_slicedToArray(_posts$filter,1),currentPost=_posts$filter2[0];var title=currentPost.title,description=currentPost.description,location=currentPost.location,price=currentPost.price,willDeliver=currentPost.willDeliver;var _useState=useState(title),_useState2=_slicedToArray(_useState,2),newTitle=_useState2[0],setNewTitle=_useState2[1];var _useState3=useState(description),_useState4=_slicedToArray(_useState3,2),newDescription=_useState4[0],setNewDescription=_useState4[1];var _useState5=useState(price),_useState6=_slicedToArray(_useState5,2),newPrice=_useState6[0],setNewPrice=_useState6[1];var _useState7=useState(location),_useState8=_slicedToArray(_useState7,2),newLocation=_useState8[0],setNewLocation=_useState8[1];var _useState9=useState(willDeliver),_useState10=_slicedToArray(_useState9,2),newWillDeliver=_useState10[0],setNewWillDeliver=_useState10[1];var navigate=useNavigate();function editPost(){return _editPost.apply(this,arguments);}function _editPost(){_editPost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var updatedPost;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:updatedPost={token:token,title:newTitle,description:newDescription,price:newPrice,location:newLocation,willDeliver:newWillDeliver,_id:postID};_context.next=3;return updatePost(updatedPost);case 3:case\"end\":return _context.stop();}}},_callee);}));return _editPost.apply(this,arguments);}var paperStyle={padding:20,height:'70vh',width:300,margin:'20px auto'};return/*#__PURE__*/_jsx(Grid,{children:/*#__PURE__*/_jsx(Paper,{elevation:10,style:paperStyle,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(event){event.preventDefault();editPost();fetchPosts();navigate('/posts');},children:[/*#__PURE__*/_jsx(Grid,{align:\"center\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Edit post\"})}),/*#__PURE__*/_jsx(TextField,{placeholder:title,fullWidth:true,required:true,onChange:function onChange(event){return setNewTitle(event.target.value);}}),/*#__PURE__*/_jsx(TextField,{placeholder:description,fullWidth:true,required:true,onChange:function onChange(event){return setNewDescription(event.target.value);}}),/*#__PURE__*/_jsx(TextField,{placeholder:price,fullWidth:true,required:true,onChange:function onChange(event){return setNewPrice(event.target.value);}}),/*#__PURE__*/_jsx(TextField,{placeholder:location,fullWidth:true,required:true,onChange:function onChange(event){return setNewLocation(event.target.value);}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",color:\"primary\",variant:\"contained\",fullWidth:true,children:\"Update\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",onClick:function onClick(){return deletePost(token,postID);},color:\"primary\",variant:\"contained\",fullWidth:true,children:\"Delete\"})]})})});};export default EditPost;","map":{"version":3,"names":["React","useState","useNavigate","useParams","deletePost","updatePost","Grid","Paper","TextField","Button","EditPost","posts","token","fetchPosts","postID","filter","post","_id","currentPost","title","description","location","price","willDeliver","newTitle","setNewTitle","newDescription","setNewDescription","newPrice","setNewPrice","newLocation","setNewLocation","newWillDeliver","setNewWillDeliver","navigate","editPost","updatedPost","paperStyle","padding","height","width","margin","event","preventDefault","target","value"],"sources":["/Users/alexmenke/Fullstack/course_work/project_10/strangersThings/src/components/EditPost.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { deletePost, updatePost } from '../api'\nimport {\n    Grid,\n    Paper,\n    TextField,\n    Button\n  } from '@mui/material'\n\n\nconst EditPost = ({ posts, token, fetchPosts }) => {\n    const { postID } = useParams();\n    const [currentPost] = posts.filter(post => post._id === postID);\n    const { title, description, location, price, willDeliver } = currentPost;\n\n    const [newTitle, setNewTitle] = useState(title);\n    const [newDescription, setNewDescription] = useState(description);\n    const [newPrice, setNewPrice] = useState(price);\n    const [newLocation, setNewLocation] = useState(location);\n    const [newWillDeliver, setNewWillDeliver] = useState(willDeliver);\n\n    const navigate = useNavigate();\n\n    async function editPost() {\n        const updatedPost = {\n            token: token,\n            title: newTitle,\n            description: newDescription,\n            price: newPrice,\n            location: newLocation,\n            willDeliver: newWillDeliver,\n            _id: postID\n        }\n        await updatePost(updatedPost);\n    }\n\n    const paperStyle = {\n        padding: 20,\n        height: '70vh',\n        width: 300,\n        margin: '20px auto'\n      }\n\n    return (\n        <Grid>\n        <Paper elevation={10} style={paperStyle}>\n        <form onSubmit={(event) => {\n            event.preventDefault();\n            editPost();\n            fetchPosts();\n            navigate('/posts');\n        }}>\n            <Grid align='center'><h2>Edit post</h2></Grid>\n            <TextField placeholder={title} fullWidth required onChange={(event) => setNewTitle(event.target.value)} />\n            <TextField placeholder={description} fullWidth required onChange={(event) => setNewDescription(event.target.value)} />\n            <TextField placeholder={price} fullWidth required onChange={(event) => setNewPrice(event.target.value)}/>\n            <TextField placeholder={location} fullWidth required onChange={(event) => setNewLocation(event.target.value)}/>\n            <Button type='submit' color='primary' variant='contained' fullWidth>Update</Button>\n            <Button type='submit' onClick={() => deletePost(token, postID)} color='primary' variant='contained' fullWidth>Delete</Button>\n          </form>\n        </Paper>\n      </Grid>\n    )\n}\n\nexport default EditPost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}