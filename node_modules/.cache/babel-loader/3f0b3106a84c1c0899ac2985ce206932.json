{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexmenke/Fullstack/course_work/project_10/strangersThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/alexmenke/Fullstack/course_work/project_10/strangersThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/alexmenke/Fullstack/course_work/project_10/strangersThings/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{loginUser}from'../api';import{Grid,Paper,TextField,Button}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var setToken=_ref.setToken,navigate=_ref.navigate;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),confirmPassword=_useState6[0],setConfirmPassword=_useState6[1];var verifyPassword=function verifyPassword(){if(password===confirmPassword){handleSubmit();}else{alert(\"Passwords do not match, please try again.\");}};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return loginUser(username,password);case 2:results=_context.sent;if(results.success){setToken(results.data.token);window.localStorage.setItem('token',results.data.token);navigate('/profile');}else{console.log(error.message);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(){return _ref2.apply(this,arguments);};}();var paperStyle={padding:20,height:'70vh',width:300,margin:'20px auto'};return/*#__PURE__*/_jsx(Grid,{children:/*#__PURE__*/_jsx(Paper,{elevation:10,style:paperStyle,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(event){event.preventDefault();verifyPassword();},children:[/*#__PURE__*/_jsx(Grid,{align:\"center\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Sign In\"})}),/*#__PURE__*/_jsx(TextField,{label:\"Username\",placeholder:\"Enter username\",fullWidth:true,required:true,onChange:function onChange(event){return setUsername(event.target.value);}}),/*#__PURE__*/_jsx(TextField,{label:\"Password\",placeholder:\"Enter password\",type:\"password\",fullWidth:true,required:true,onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsx(TextField,{label:\"Confirm password\",placeholder:\"Confirm password\",type:\"password\",fullWidth:true,required:true,onChange:function onChange(event){return setConfirmPassword(event.target.value);}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",color:\"primary\",variant:\"contained\",fullWidth:true,children:\"SIGN IN\"})]})})});};export default Login;","map":{"version":3,"names":["React","useState","loginUser","Grid","Paper","TextField","Button","Login","setToken","navigate","username","setUsername","password","setPassword","confirmPassword","setConfirmPassword","verifyPassword","handleSubmit","alert","results","success","data","token","window","localStorage","setItem","console","log","error","message","paperStyle","padding","height","width","margin","event","preventDefault","target","value"],"sources":["/Users/alexmenke/Fullstack/course_work/project_10/strangersThings/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { loginUser } from '../api';\nimport {\n  Grid,\n  Paper,\n  TextField,\n  Button\n} from '@mui/material'\n\nconst Login = ({ setToken, navigate }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n\n  const verifyPassword = () => {\n    if (password === confirmPassword) {\n      handleSubmit();\n    } else {\n      alert(\"Passwords do not match, please try again.\")\n    }\n  }\n\n  const handleSubmit = async () => {\n    const results = await loginUser(username, password);\n    if (results.success) {\n      setToken(results.data.token);\n      window.localStorage.setItem('token', results.data.token);\n      navigate('/profile');\n    } else {\n      console.log(error.message)\n    }\n  }\n\n  const paperStyle = {\n    padding: 20,\n    height: '70vh',\n    width: 300,\n    margin: '20px auto'\n  }\n\n  return (\n    <Grid>\n      <Paper elevation={10} style={paperStyle}>\n        <form onSubmit={(event) => {\n          event.preventDefault();\n          verifyPassword();\n        }}>\n          <Grid align='center'><h2>Sign In</h2></Grid>\n          <TextField label=\"Username\" placeholder=\"Enter username\" fullWidth required onChange={(event) => setUsername(event.target.value)} />\n          <TextField label=\"Password\" placeholder=\"Enter password\" type='password' fullWidth required onChange={(event) => setPassword(event.target.value)} />\n          <TextField label=\"Confirm password\" placeholder=\"Confirm password\" type='password' fullWidth required onChange={(event) => setConfirmPassword(event.target.value)} />\n          <Button type='submit' color='primary' variant='contained' fullWidth>SIGN IN</Button>\n        </form>\n      </Paper>\n    </Grid>\n  )\n}\n\nexport default Login;\n"],"mappings":"qdAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,SAAT,KAA0B,QAA1B,CACA,OACEC,IADF,CAEEC,KAFF,CAGEC,SAHF,CAIEC,MAJF,KAKO,eALP,C,wFAOA,GAAMC,MAAK,CAAG,QAARA,MAAQ,MAA4B,IAAzBC,SAAyB,MAAzBA,QAAyB,CAAfC,QAAe,MAAfA,QAAe,CACxC,cAAgCR,QAAQ,CAAC,EAAD,CAAxC,wCAAOS,QAAP,eAAiBC,WAAjB,eACA,eAAgCV,QAAQ,CAAC,EAAD,CAAxC,yCAAOW,QAAP,eAAiBC,WAAjB,eACA,eAA8CZ,QAAQ,CAAC,EAAD,CAAtD,yCAAOa,eAAP,eAAwBC,kBAAxB,eAEA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,EAAM,CAC3B,GAAIJ,QAAQ,GAAKE,eAAjB,CAAkC,CAChCG,YAAY,GACb,CAFD,IAEO,CACLC,KAAK,CAAC,2CAAD,CAAL,CACD,CACF,CAND,CAQA,GAAMD,aAAY,6FAAG,uKACGf,UAAS,CAACQ,QAAD,CAAWE,QAAX,CADZ,QACbO,OADa,eAEnB,GAAIA,OAAO,CAACC,OAAZ,CAAqB,CACnBZ,QAAQ,CAACW,OAAO,CAACE,IAAR,CAAaC,KAAd,CAAR,CACAC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAqCN,OAAO,CAACE,IAAR,CAAaC,KAAlD,EACAb,QAAQ,CAAC,UAAD,CAAR,CACD,CAJD,IAIO,CACLiB,OAAO,CAACC,GAAR,CAAYC,KAAK,CAACC,OAAlB,EACD,CARkB,sDAAH,kBAAZZ,aAAY,2CAAlB,CAWA,GAAMa,WAAU,CAAG,CACjBC,OAAO,CAAE,EADQ,CAEjBC,MAAM,CAAE,MAFS,CAGjBC,KAAK,CAAE,GAHU,CAIjBC,MAAM,CAAE,WAJS,CAAnB,CAOA,mBACE,KAAC,IAAD,wBACE,KAAC,KAAD,EAAO,SAAS,CAAE,EAAlB,CAAsB,KAAK,CAAEJ,UAA7B,uBACE,cAAM,QAAQ,CAAE,kBAACK,KAAD,CAAW,CACzBA,KAAK,CAACC,cAAN,GACApB,cAAc,GACf,CAHD,wBAIE,KAAC,IAAD,EAAM,KAAK,CAAC,QAAZ,uBAAqB,+BAArB,EAJF,cAKE,KAAC,SAAD,EAAW,KAAK,CAAC,UAAjB,CAA4B,WAAW,CAAC,gBAAxC,CAAyD,SAAS,KAAlE,CAAmE,QAAQ,KAA3E,CAA4E,QAAQ,CAAE,kBAACmB,KAAD,QAAWxB,YAAW,CAACwB,KAAK,CAACE,MAAN,CAAaC,KAAd,CAAtB,EAAtF,EALF,cAME,KAAC,SAAD,EAAW,KAAK,CAAC,UAAjB,CAA4B,WAAW,CAAC,gBAAxC,CAAyD,IAAI,CAAC,UAA9D,CAAyE,SAAS,KAAlF,CAAmF,QAAQ,KAA3F,CAA4F,QAAQ,CAAE,kBAACH,KAAD,QAAWtB,YAAW,CAACsB,KAAK,CAACE,MAAN,CAAaC,KAAd,CAAtB,EAAtG,EANF,cAOE,KAAC,SAAD,EAAW,KAAK,CAAC,kBAAjB,CAAoC,WAAW,CAAC,kBAAhD,CAAmE,IAAI,CAAC,UAAxE,CAAmF,SAAS,KAA5F,CAA6F,QAAQ,KAArG,CAAsG,QAAQ,CAAE,kBAACH,KAAD,QAAWpB,mBAAkB,CAACoB,KAAK,CAACE,MAAN,CAAaC,KAAd,CAA7B,EAAhH,EAPF,cAQE,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAC,SAA5B,CAAsC,OAAO,CAAC,WAA9C,CAA0D,SAAS,KAAnE,qBARF,GADF,EADF,EADF,CAgBD,CA/CD,CAiDA,cAAe/B,MAAf"},"metadata":{},"sourceType":"module"}