{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexmenke/Fullstack/course_work/project_10/strangersThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/alexmenke/Fullstack/course_work/project_10/strangersThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/alexmenke/Fullstack/course_work/project_10/strangersThings/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link,useParams,useNavigate}from'react-router-dom';import{Paper,Card,CardContent,CardActions,Button,TextField}from'@mui/material';import{deletePost,createMessage}from'../api';import styles from'../style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SendMessage=function SendMessage(_ref){var postID=_ref.postID,token=_ref.token;var _useState=useState({content:''}),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var navigate=useNavigate();function addMessage(){return _addMessage.apply(this,arguments);}function _addMessage(){_addMessage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createMessage({postID:postID,message:message,token:token});case 2:response=_context.sent;console.log(response);case 4:case\"end\":return _context.stop();}}},_callee);}));return _addMessage.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(event){event.preventDefault();addMessage();navigate(\"/posts\");},children:[/*#__PURE__*/_jsx(TextField,{type:\"text\",placeholder:\"Write message here\",onChange:function onChange(event){return setMessage({content:event.target.value});}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",type:\"submit\",children:\"Send\"})]});};var SinglePostView=function SinglePostView(_ref2){var posts=_ref2.posts,token=_ref2.token;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),activateMessage=_useState4[0],setActivateMessage=_useState4[1];var _useParams=useParams(),postID=_useParams.postID;var paperStyle={padding:20,margin:'20px auto'};if(posts.length){var _posts$filter=posts.filter(function(post){return post._id===postID;}),_posts$filter2=_slicedToArray(_posts$filter,1),currentPost=_posts$filter2[0];var title=currentPost.title,description=currentPost.description,location=currentPost.location,price=currentPost.price,willDeliver=currentPost.willDeliver,_id=currentPost._id,isAuthor=currentPost.isAuthor;return/*#__PURE__*/_jsx(Paper,{elevation:10,style:paperStyle,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"postTitle\",children:title}),/*#__PURE__*/_jsxs(\"p\",{className:\"postInfo\",children:[\"Description: \",description]}),/*#__PURE__*/_jsxs(\"p\",{className:\"postInfo\",children:[\"Price: \",price]}),/*#__PURE__*/_jsxs(\"p\",{className:\"postInfo\",children:[\"Location: \",location]}),/*#__PURE__*/_jsxs(\"p\",{className:\"postInfo\",children:[\"Delivery: \",willDeliver]})]}),/*#__PURE__*/_jsx(CardActions,{children:isAuthor?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/posts\",children:/*#__PURE__*/_jsx(Button,{children:\"View All\"})}),/*#__PURE__*/_jsx(Link,{to:\"/posts\",children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return deletePost(token,_id);},children:\"Delete\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/posts\",children:/*#__PURE__*/_jsx(Button,{children:\"View All\"})}),token&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setActivateMessage(!activateMessage);},children:\"Write a message\"}),activateMessage&&/*#__PURE__*/_jsx(SendMessage,{postID:postID,token:token})]})]})})]})});}else{return/*#__PURE__*/_jsx(\"h1\",{children:\"Loading post...\"});}};export default SinglePostView;","map":{"version":3,"names":["React","useState","Link","useParams","useNavigate","Paper","Card","CardContent","CardActions","Button","TextField","deletePost","createMessage","styles","SendMessage","postID","token","content","message","setMessage","navigate","addMessage","response","console","log","event","preventDefault","target","value","SinglePostView","posts","activateMessage","setActivateMessage","paperStyle","padding","margin","length","filter","post","_id","currentPost","title","description","location","price","willDeliver","isAuthor"],"sources":["/Users/alexmenke/Fullstack/course_work/project_10/strangersThings/src/components/SinglePostView.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useParams, useNavigate } from 'react-router-dom';\nimport {\n    Paper,\n    Card,\n    CardContent,\n    CardActions,\n    Button,\n    TextField,\n} from '@mui/material';\nimport { deletePost, createMessage } from '../api';\nimport styles from '../style.css';\n\nconst SendMessage = ({ postID, token }) => {\n    const [message, setMessage] = useState({ content: '' });\n    const navigate = useNavigate();\n\n    async function addMessage() {\n        \n        const response = await createMessage({ postID, message, token })\n        console.log(response)\n    }\n\n    return (\n        <form onSubmit={(event) => {\n            event.preventDefault();\n            addMessage();\n            navigate(`/posts`)\n        }}>\n            <TextField\n                type='text'\n                placeholder='Write message here'\n                onChange={(event) => setMessage({ content: event.target.value })}\n            />\n            <Button variant='contained' type='submit'>Send</Button>\n        </form>\n    )\n}\n\nconst SinglePostView = ({ posts, token }) => {\n    const [activateMessage, setActivateMessage] = useState(false)\n    const { postID } = useParams();\n    const paperStyle = {\n        padding: 20,\n        margin: '20px auto'\n    }\n\n    if (posts.length) {\n        const [currentPost] = posts.filter(post => post._id === postID);\n        const { title, description, location, price, willDeliver, _id, isAuthor } = currentPost;\n\n        return (\n            <Paper elevation={10} style={paperStyle}>\n                <Card>\n                    <CardContent>\n                        <h3 className='postTitle'>{title}</h3>\n                        <p className='postInfo'>Description: {description}</p>\n                        <p className='postInfo'>Price: {price}</p>\n                        <p className='postInfo'>Location: {location}</p>\n                        <p className='postInfo'>Delivery: {willDeliver}</p>\n                    </CardContent>\n                    <CardActions>\n                        {\n                            isAuthor ? (\n                                <>\n                                    <Link to={`/posts`}><Button>View All</Button></Link>\n                                    <Link to={`/posts`}><Button onClick={() => deletePost(token, _id)}>Delete</Button></Link>\n                                </>\n                            ) : (\n                                <>\n                                    <Link to={`/posts`}><Button>View All</Button></Link>\n                                    {token &&\n                                        <>\n                                            <Button onClick={() => setActivateMessage(!activateMessage)}>Write a message</Button>\n                                            {\n                                                activateMessage && <SendMessage postID={postID} token={token} />\n                                            }\n                                        </>\n                                    }\n                                </>\n                            )\n                        }\n                    </CardActions>\n                </Card >\n            </Paper>\n        )\n    } else {\n        return (\n            <h1>Loading post...</h1>\n        )\n    }\n\n}\n\nexport default SinglePostView;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}